<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Prawn::Document::Internals</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Prawn::Document::Internals</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/prawn/document/internals_rb.html">
                lib/prawn/document/internals.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
This module exposes a few low-level PDF features for those who want to
extend <a href="../../Prawn.html">Prawn</a>&#8216;s core functionality. If
you are not comfortable with low level PDF functionality as defined by
Adobe&#8216;s specification, chances are you won&#8216;t need anything you
find here.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000195">add_content</a>&nbsp;&nbsp;
      <a href="#M000203">before_render</a>&nbsp;&nbsp;
      <a href="#M000194">close_content_stream</a>&nbsp;&nbsp;
      <a href="#M000192">current_page</a>&nbsp;&nbsp;
      <a href="#M000190">deref</a>&nbsp;&nbsp;
      <a href="#M000200">names</a>&nbsp;&nbsp;
      <a href="#M000202">names?</a>&nbsp;&nbsp;
      <a href="#M000193">new_content_stream</a>&nbsp;&nbsp;
      <a href="#M000204">on_page_create</a>&nbsp;&nbsp;
      <a href="#M000191">page_content</a>&nbsp;&nbsp;
      <a href="#M000199">page_ext_gstates</a>&nbsp;&nbsp;
      <a href="#M000197">page_fonts</a>&nbsp;&nbsp;
      <a href="#M000201">page_identifier</a>&nbsp;&nbsp;
      <a href="#M000196">page_resources</a>&nbsp;&nbsp;
      <a href="#M000198">page_xobjects</a>&nbsp;&nbsp;
      <a href="#M000188">ref</a>&nbsp;&nbsp;
      <a href="#M000189">ref!</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000195" class="method-detail">
        <a name="M000195"></a>

        <div class="method-heading">
          <a href="Internals.src/M000195.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000195.html');return false;">
          <span class="method-name">add_content</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Appends a raw string to the current page content.
</p>
<pre>
 # Raw line drawing example:
 x1,y1,x2,y2 = 100,500,300,550
 pdf.add_content(&quot;%.3f %.3f m&quot; % [ x1, y1 ])  # move
 pdf.add_content(&quot;%.3f %.3f l&quot; % [ x2, y2 ])  # draw path
 pdf.add_content(&quot;S&quot;) # stroke
</pre>
        </div>
      </div>

      <div id="method-M000203" class="method-detail">
        <a name="M000203"></a>

        <div class="method-heading">
          <a href="Internals.src/M000203.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000203.html');return false;">
          <span class="method-name">before_render</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Defines a block to be called just before the document is rendered.
</p>
        </div>
      </div>

      <div id="method-M000194" class="method-detail">
        <a name="M000194"></a>

        <div class="method-heading">
          <a href="Internals.src/M000194.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000194.html');return false;">
          <span class="method-name">close_content_stream</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000192" class="method-detail">
        <a name="M000192"></a>

        <div class="method-heading">
          <a href="Internals.src/M000192.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000192.html');return false;">
          <span class="method-name">current_page</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Grabs the reference for the current page
</p>
        </div>
      </div>

      <div id="method-M000190" class="method-detail">
        <a name="M000190"></a>

        <div class="method-heading">
          <a href="Internals.src/M000190.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000190.html');return false;">
          <span class="method-name">deref</span><span class="method-args">(obj)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
At any stage in the object tree an object can be replaced with an indirect
reference. To get access to the object safely, regardless of if it&#8216;s
hidden behind a Prawn::Reference, wrap it in <a
href="Internals.html#M000190">deref</a>().
</p>
        </div>
      </div>

      <div id="method-M000200" class="method-detail">
        <a name="M000200"></a>

        <div class="method-heading">
          <a href="Internals.src/M000200.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000200.html');return false;">
          <span class="method-name">names</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The Name dictionary (PDF spec 3.6.3) for this document. It is lazily
initialized, so that documents that do not need a name dictionary do not
incur the additional overhead.
</p>
        </div>
      </div>

      <div id="method-M000202" class="method-detail">
        <a name="M000202"></a>

        <div class="method-heading">
          <a href="Internals.src/M000202.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000202.html');return false;">
          <span class="method-name">names?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the Names dictionary is in use for this document.
</p>
        </div>
      </div>

      <div id="method-M000193" class="method-detail">
        <a name="M000193"></a>

        <div class="method-heading">
          <a href="Internals.src/M000193.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000193.html');return false;">
          <span class="method-name">new_content_stream</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
If there is a page active, create a new content stream and append it to the
page. Also sets the new content stream to be active, so any new content
will go there.
</p>
        </div>
      </div>

      <div id="method-M000204" class="method-detail">
        <a name="M000204"></a>

        <div class="method-heading">
          <a href="Internals.src/M000204.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000204.html');return false;">
          <span class="method-name">on_page_create</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Defines a block to be called just before a new page is started.
</p>
        </div>
      </div>

      <div id="method-M000191" class="method-detail">
        <a name="M000191"></a>

        <div class="method-heading">
          <a href="Internals.src/M000191.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000191.html');return false;">
          <span class="method-name">page_content</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Grabs the reference for the current page content
</p>
        </div>
      </div>

      <div id="method-M000199" class="method-detail">
        <a name="M000199"></a>

        <div class="method-heading">
          <a href="Internals.src/M000199.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000199.html');return false;">
          <span class="method-name">page_ext_gstates</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The ExtGState dictionary for the current page
</p>
        </div>
      </div>

      <div id="method-M000197" class="method-detail">
        <a name="M000197"></a>

        <div class="method-heading">
          <a href="Internals.src/M000197.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000197.html');return false;">
          <span class="method-name">page_fonts</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The <a href="../Font.html">Font</a> dictionary for the current page
</p>
        </div>
      </div>

      <div id="method-M000201" class="method-detail">
        <a name="M000201"></a>

        <div class="method-heading">
          <a href="Internals.src/M000201.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000201.html');return false;">
          <span class="method-name">page_identifier</span><span class="method-args">(k)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the page object reference for a given page number. Used by <a
href="../Outline.html">Outline</a> to generate destination links.
</p>
        </div>
      </div>

      <div id="method-M000196" class="method-detail">
        <a name="M000196"></a>

        <div class="method-heading">
          <a href="Internals.src/M000196.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000196.html');return false;">
          <span class="method-name">page_resources</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The Resources dictionary for the current page
</p>
        </div>
      </div>

      <div id="method-M000198" class="method-detail">
        <a name="M000198"></a>

        <div class="method-heading">
          <a href="Internals.src/M000198.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000198.html');return false;">
          <span class="method-name">page_xobjects</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The XObject dictionary for the current page
</p>
        </div>
      </div>

      <div id="method-M000188" class="method-detail">
        <a name="M000188"></a>

        <div class="method-heading">
          <a href="Internals.src/M000188.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000188.html');return false;">
          <span class="method-name">ref</span><span class="method-args">(data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a new Prawn::Reference and adds it to the <a
href="../Document.html">Document</a>&#8216;s object list. The <tt>data</tt>
argument is anything that Prawn::PdfObject() can convert.
</p>
<p>
Returns the identifier which points to the reference in the ObjectStore
</p>
        </div>
      </div>

      <div id="method-M000189" class="method-detail">
        <a name="M000189"></a>

        <div class="method-heading">
          <a href="Internals.src/M000189.html" target="Code" class="method-signature"
            onclick="popupCode('Internals.src/M000189.html');return false;">
          <span class="method-name">ref!</span><span class="method-args">(data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Like <a href="Internals.html#M000188">ref</a>, but returns the actual
reference instead of its identifier.
</p>
<p>
While you can use this to build up nested references within the object
tree, it is recommended to persist only identifiers, and them provide
helper methods to look up the actual references in the ObjectStore if
needed. If you take this approach, <a
href="Snapshot.html">Prawn::Document::Snapshot</a> will probably work with
your extension
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>